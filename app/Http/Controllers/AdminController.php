<?php

namespace App\Http\Controllers;
use Illuminate\Support\Facades\Auth;
use App\Models\User;
use App\Models\Material;


use Illuminate\Http\Request;

class AdminController extends Controller
{
    
    public function addview(){

        if(Auth::id()){
            if(Auth::user()->usertype==1){
                return view('admin.add_material');
            }else{
                return redirect()->back();
            }
        }else{
            return redirect('login');
        }
        
    }

    public function upload(Request $request){
        $material = new material;

        $image=$request->file;
        $imagename=time().'.'.$image->getClientOriginalExtension();
        $request->file->move('materialimage',$imagename);
        $material->image=$imagename;

        $material->materialname=$request->name;
        $material->quantity=$request->number;
        $material->description=$request->description;
        $material->save();

        return redirect()->back()->with('message','material added successfully'); 
    }

}
